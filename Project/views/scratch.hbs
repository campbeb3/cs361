<body>
    <p>
        <label for="state-filter">Select State:</label><br>
        <select id='sel'>
            <option value=''>-- Select --</option>
        </select>
    </p>
    <p>
        <label for="year-filter">Select Year:</label><br>
        <select id='sel1'>
            <option value=''>-- Select --</option>
        </select>
    </p>
    <p>
        <label for="crime-filter">Violent Crimes:</label><br>
        <select id='sel2'>
            <option value=''>-- Select2 --</option>
        </select>
    </p>

</body>

<script>

const state_crime.json = 
[
  {
    "State": "Alabama",
    "Year": 1960,
    "Data": {
      "Population": 3266740,
      "Rates": {
        "Property": {
          "All": 1035.4,
          "Burglary": 355.9,
          "Larceny": 592.1,
          "Motor": 87.3
        },
        "Violent": {
          "All": 186.6,
          "Assault": 138.1,
          "Murder": 12.4,
          "Rape": 8.6,
          "Robbery": 27.5
        }
      },
      "Totals": {
        "Property": {
          "All": 33823,
          "Burglary": 11626,
          "Larceny": 19344,
          "Motor": 2853
        },
        "Violent": {
          "All": 6097,
          "Assault": 4512,
          "Murder": 406,
          "Rape": 281,
          "Robbery": 898
        }
      }
    }
  }
]
    $(document).ready(function () {

    let arrData = [];

    $.getJSON(state_crime.json, function (data) {

        let arr_State = [];
        let arr_Year = [];

        $.each(data, function (index, value) {
            arr_State.push(value.State);
            arrData = data;
        });
        $.each(data, function (index, value) {
            arr_Year.push(value.Year);
            arrData = data;
        });

        arr_State = Array.from(new Set(arr_State));
        arr_Year = Array.from(new Set(arr_Year));

        $.each(arr_State, function (index, value) {
            $('#sel').append('<option value="' + value + '">' + value + '</option>');
        });
        $.each(arr_Year, function (index, value) {
            $('#sel1').append('<option value="' + value + '">' + value + '</option>');
        });

    });


    $('#sel').change(function () {
        let State = this.options[this.selectedIndex].value;

        $('#sel1').change(function () {
            let Year = this.options[this.selectedIndex].value;

            let filterStateYear = arrData.filter(function (value) {
                return value.State === State;
                return value.Year === Year;
            });

            $('#sel2')
                .empty()
                .append('<option value="">-- Report --</option>');
            $.each(filterStateYear, function (index, value) {
                $('#sel2').append('<option value="' + State + Year +'">' + JSON.stringify(value.Data.Totals.Violent) + '</option>');
            });
        });

    });
});
</script>
</body>
</html>
